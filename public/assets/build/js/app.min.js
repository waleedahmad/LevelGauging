function getInspectionEditButton(a,b){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="t-i-form" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 80.8 27.7" enable-background="new 0 0 80.8 27.7" xml:space="preserve"><g><rect x="0.5" y="0.4" fill="'+a+'" stroke="#F3F8F9" stroke-miterlimit="10" width="80.3" height="27.2"/><g><rect x="28.6" y="9.8" fill="none" width="68.2" height="29.8"/><text transform="matrix(1 0 0 1 28.5552 17.8945)" fill="#FFFFFF" font-size="12.1205">'+b+'</text></g><polygon fill="#FFFFFF" points="19.7,14.3 15.4,16.7 11,19.1 11,14.3 11,9.5 15.4,11.9 	"/></g></svg>'}function addInspectEditOverlayCloseEvent(){$(".overlays > .editinspection > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})})}function date_time_inspection_datepickers(){$("#date-inspected,#date-cleaned, #next-inspection").datepicker({dateFormat:"yy-mm-dd"})}function attactInspectionEditSubmit(){$("#t-i-form").on("click",function(a){var b=$.trim($("#contractor").val()),c=$.trim($("#telephone").val()),d=$.trim($("#email").val()),e=$.trim($("#date-inspected").val()),f=$.trim($("#date-cleaned").val()),g=$.trim($("#next-inspection").val());if(b.length&&c.length&&d.length&&e.length&&f.length&&g.length)if(validateEmail(d)){$("meta[name=tankid]").attr("content");$(".inspection-form > form").submit()}else $(".reporting-errors").text("Invalid Email.");else console.log("All Fields Required"),$(".reporting-errors").text("All fields required.")})}function fillInspectionDetailFields(a){$.ajax({type:"POST",url:"/inspection/details",data:{tankid:a},success:function(a){fillInspectionFormWithResponse(a)}})}function fillInspectionFormWithResponse(a){$("#contractor").val(a.contractor),$("#telephone").val(a.phone),$("#email").val(a.email),$("#date-inspected").val(a.date_inspected),$("#date-cleaned").val(a.date_cleaned),$("#next-inspection").val(a.next_inspection)}function addLocationEditOverlayCloseEvent(){$(".overlays > .editlocation > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})})}function fillLocationFormFields(a){$.ajax({type:"POST",url:"/location/details",data:{tankid:a},success:function(a){fillLocationFormWithResponse(a)}})}function attactLocationEditSubmit(){$("#t-i-form").on("click",function(a){$(".location-form > form").submit()})}function fillLocationFormWithResponse(a){$("#name").val(a.location_name),$("#airportcode").val(a.airport_code),$("#street1").val(a.street1),$("#street2").val(a.street2),$("#city").val(a.city),$("#region").val(a.region),$("#postcode").val(a.postcode),$("#country").val(a.country)}function addSpecsEditOverlayCloseEvent(){$(".overlays > .editspecs > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})})}function attactSpecsEditSubmit(){$("#t-i-form").on("click",function(a){var b=$.trim($("#fuelgrade").val()),c=$.trim($("#markingid").val()),d=$.trim($("#tankshape").val()),e=$.trim($("#titled").val()),f=$.trim($("#internal").val());b.length&&c.length&&d.length&&e.length&&f.length?$(".specifications-form > form").submit():(console.log("All Fields Required"),$(".reporting-errors").text("All fields required."))})}function fillSpecsFormFields(a){$.ajax({type:"POST",url:"/specifications/details",data:{tankid:a},success:function(a){fillSpecsFormWithResponse(a)}})}function fillSpecsFormWithResponse(a){$("#fuelgrade").val(a.fuel_grade),$("#markingid").val(a.marking_id),$("#tankshape").val(a.shape),$("#titled").val(a.titled),$("#internal").val(a.internal)}function attactAddSubmitEvent(a){$("#s-e-r-form").on("click",function(b){var c=$.trim($("#email").val()),d=$.trim($("#status").val()),e=$.trim($("#frequency").val()),f=$.trim($("#timepicker").val()),g=$.trim($("#datepicker").val());if(c.length&&d.length&&e.length&&f.length&&g.length)if(validateEmail(c)){var h=$("meta[name=tankid]").attr("content");alreadyExists(c,a,h)}else $(".reporting-errors").text("Invalid Email.");else console.log("All Fields Required"),$(".reporting-errors").text("All fields required.")})}function validateEmail(a){var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return b.test(a)}function alreadyExists(a,b,c){$.ajax({type:"POST",url:"/notifications/verify/email",data:{email:a,type:b,tankid:c},success:function(a){analyizeAlreadyExists(a)}})}function attachInputFieldTimeDateSelectors(){$("#timepicker").timepicker({timeFormat:"h:i A"}),$("#datepicker").datepicker({dateFormat:"yy-mm-dd"})}function analyizeAlreadyExists(a){a.status?$(".reporting-errors").text("Email already exists on list."):$(".report-form > form").submit()}function addOverlayCloseEvent(){$(".overlays > .form > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})})}function getNotificationEmailFormButton(a,b){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="s-e-r-form" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 80.8 27.7" enable-background="new 0 0 80.8 27.7" xml:space="preserve"><g><rect x="0.5" y="0.4" fill="'+a+'" stroke="#F3F8F9" stroke-miterlimit="10" width="80.3" height="27.2"/><g><rect x="28.6" y="9.8" fill="none" width="68.2" height="29.8"/><text transform="matrix(1 0 0 1 28.5552 17.8945)" fill="#FFFFFF" font-size="12.1205">'+b+'</text></g><polygon fill="#FFFFFF" points="19.7,14.3 15.4,16.7 11,19.1 11,14.3 11,9.5 15.4,11.9 	"/></g></svg>'}function attactUpdateSubmitEvent(a){$("#s-e-r-form").on("click",function(b){var c=$.trim($("#email").val()),d=$.trim($("#email").attr("data-oldmail")),e=$.trim($("#status").val()),f=$.trim($("#frequency").val()),g=$.trim($("#timepicker").val()),h=$.trim($("#datepicker").val());if(c.length&&e.length&&f.length&&g.length&&h.length)if(validateEmail(c))if(c!=d){var i=$("meta[name=tankid]").attr("content");alreadyExists(c,a,i)}else $(".report-form > form").submit();else $(".reporting-errors").text("Invalid Email.");else console.log("All Fields Required"),$(".reporting-errors").text("All fields required.")})}function getNotificationDetails(a){$.ajax({type:"POST",url:"/notifications/details/email",data:{id:a},success:function(a){setFieldsFromResponse(a)}})}function setFieldsFromResponse(a){$("#status").val(a.active),$("#frequency").val(a.frequency),$("#email").val(a.email),$("#email").attr("data-oldmail",a.email),$("#timepicker").val(a.time),$("#datepicker").val(a.date)}var adminRedirect=function(){this.authLink="/users/authorize",this.settingLink="/users/settings",this.getListCount=function(){return $(".sidebar-user > ul > a").length},this.getFirstUserLink=function(){return $(".sidebar-user > ul > a:first-child").attr("href")},this.forceRedirect=function(a){window.location.href=a},this.getCurrentPath=function(){return window.location.pathname},this.satisfyRedirect=function(){return this.getListCount()&&this.getCurrentPath()!=this.getFirstUserLink()&&this.getCurrentPath()===this.authLink||this.getCurrentPath()===this.settingLink?!0:!1},this.init=function(){this.satisfyRedirect()&&this.forceRedirect(this.getFirstUserLink())}};$(function(){checkAdminRedirect=new adminRedirect,checkAdminRedirect.init()}());var EditClient=function(){this.handleUserEdit=function(a){var b=a.data.context;b.showEditForm(b,this)},this.handleUserRemove=function(a){var b=a.data.context;b.showRemoveForm(b,this)},this.attachEditEvent=function(){$(".admin-edit-user").on("click",{context:this},this.handleUserEdit),$(".admin-remove-user").on("click",{context:this},this.handleUserRemove)},this.init=function(){this.attachEditEvent()}};$(function(){var a=new EditClient;a.init()}()),EditClient.prototype.showEditForm=function(a,b){var c=$(b).attr("data-email"),d='<div class="overlays"><div class="edit-auth-user"><span class="close">X</span><h2>Sign in access - Edit</h2><div class="edit-auth-user-form"><form method="post" action="/user/update"><table><tr><td class="spec">Access : </td><td><select name="access" id="access" required><option value="1">Active</option><option value="0">Disabled</option></select></td></tr><tr><td class="spec">Set User ID : </td><td><input type="email" name="email" id="email" placeholder="email" required></td></tr><tr><td class="spec">Set Password : </td><td><input type="password" name="password" id="password" placeholder="new password (optional)" required></td></tr><tr><td class="spec">eNotes : </td><td class="e-note"><textarea name="enote" id="enote" rows="10" cols="50"></textarea></td></tr></table>'+a.getSubmitButton("Update")+'<div class="form-errors"></div><input type="hidden" name="user-email" value="'+c+'"></form></div></div></div>';$(d).hide().appendTo(".wrapper").fadeIn("fast"),a.attachOverlayCloseEvent(),a.getFormFields(a,c),a.attachSubmitEvent(a)},EditClient.prototype.attachSubmitEvent=function(a){$("#s-c-form").on("click",function(b){var c=$.trim($("#access").val()),d=$("#email").attr("data-oldmail"),e=$.trim($("#email").val());$.trim($("#enote").val());c.length&&e.length?a.validateEmail(e)?(console.log(),e===d?$(".edit-auth-user-form > form").submit():a.alreadyExists(a,e)):$(".form-errors").text("Invalid Email."):(console.log("All Fields Required"),$(".form-errors").text("All fields required."))})},EditClient.prototype.validateEmail=function(a){var b=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return b.test(a)},EditClient.prototype.alreadyExists=function(a,b){$.ajax({type:"POST",url:"/user/verify/email",data:{email:b},success:function(b){a.analyizeAlreadyExists(b)}})},EditClient.prototype.analyizeAlreadyExists=function(a){a?$(".form-errors").text("Email already exist"):$(".edit-auth-user-form > form").submit()},EditClient.prototype.attachOverlayCloseEvent=function(){$(".overlays > .edit-auth-user > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})})},EditClient.prototype.getFormFields=function(a,b){$.ajax({type:"POST",url:"/user/details",data:{email:b},success:function(b){a.fillFormFields(a,b)}})},EditClient.prototype.fillFormFields=function(a,b){$("#access").val(b.approved),$("#email").val(b.email),$("#email").attr("data-oldmail",b.email),$("#enote").val(b.enote)},EditClient.prototype.getSubmitButton=function(a){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="s-c-form" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 80.8 27.7" enable-background="new 0 0 80.8 27.7" xml:space="preserve"><g><rect x="0.5" y="0.4" fill="#839D3C" stroke="#F3F8F9" stroke-miterlimit="10" width="80.3" height="27.2"/><g><rect x="28.6" y="9.8" fill="none" width="68.2" height="29.8"/><text transform="matrix(1 0 0 1 28.5552 17.8945)" fill="#FFFFFF" font-size="12.1205">'+a+'</text></g><polygon fill="#FFFFFF" points="19.7,14.3 15.4,16.7 11,19.1 11,14.3 11,9.5 15.4,11.9 	"/></g></svg>'},EditClient.prototype.showRemoveForm=function(a,b){var c=$(b).attr("data-email"),d='<div class="overlays"><div class="confirm-remove"><span class="close">X</span><h2>Contacts - Remove</h2><div class="dialogue"><div class="left"><p>Are you sure you want to remove contact from this list</p></div><div class="right">'+a.getDeleteButton("Remove",c)+"</div><div></div></div>";$(d).hide().appendTo(".wrapper").fadeIn("fast"),a.attachRemoveOverlayClose(),a.submitRemoveRequest()},EditClient.prototype.submitRemoveRequest=function(){$("#d-c-form").on("click",function(){var a=$(this),b=$(a).attr("data-email");$.ajax({type:"POST",url:"/user/delete",data:{email:b},success:function(a){a&&(window.location="http://"+location.host+"/users/authorize")}})})},EditClient.prototype.attachRemoveOverlayClose=function(){$(".overlays > .confirm-remove > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})})},EditClient.prototype.getDeleteButton=function(a,b){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="d-c-form" data-email="'+b+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 80.8 27.7" enable-background="new 0 0 80.8 27.7" xml:space="preserve"><g><rect x="0.5" y="0.4" fill="#839D3C" stroke="#F3F8F9" stroke-miterlimit="10" width="80.3" height="27.2"/><g><rect x="28.6" y="9.8" fill="none" width="68.2" height="29.8"/><text transform="matrix(1 0 0 1 28.5552 17.8945)" fill="#FFFFFF" font-size="12.1205">'+a+'</text></g><polygon fill="#FFFFFF" points="19.7,14.3 15.4,16.7 11,19.1 11,14.3 11,9.5 15.4,11.9  "/></g></svg>'};var AddContact=function(){this.getContactsCount=function(){return $(".address-list").find(".address").length},this.disableAddContact=function(){$("#add-contact").css({cursor:"not-allowed"})},this.attachAddContactListner=function(){$("#add-contact").on("click",{context:this},this.addNewContact)},this.addNewContact=function(a){var b=a.data.context;b.getOverlayTemplate(b)},this.getTankId=function(){return $("meta[name=tankid]").attr("content")},this.getUserId=function(){return $("meta[name=userid]").attr("content")},this.appendOverlayToWrapper=function(a){$(a).hide().appendTo(".wrapper").fadeIn("fast")},this.init=function(){this.getContactsCount()>8?this.disableAddContact():this.attachAddContactListner()}};$(function(){var a=new AddContact;a.init()}()),AddContact.prototype.getOverlayTemplate=function(a){var b=a.getTankId(),c=a.getUserId(),d='<div class="overlays"><div class="addcontactform">'+a.getOverlayHeader({className:"close"})+'<div class="contact-form"><form method="post" action="/contacts/add"><table>'+a.getTableRow({tr:{className:"theader"},td:{className:"spec",label:"Title Header   :",input:{type:"text",name:"title",id:"title",p_holder:"Contact title"}}})+a.getTableRow({tr:{className:""},td:{className:"spec",label:"Name :",input:{type:"text",name:"name",id:"name",p_holder:"Full name"}}})+a.getTableRow({tr:{className:""},td:{className:"spec",label:"Job title : ",input:{type:"text",name:"job-title",id:"job-title",p_holder:"job title"}}})+a.getTableRow({tr:{className:""},td:{className:"spec",label:"Company : ",input:{type:"text",name:"company",id:"company",p_holder:"Company name"}}})+a.getTableRow({tr:{className:""},td:{className:"spec",label:"Telephone 1 :",input:{type:"phone1",name:"phone1",id:"phone1",p_holder:"Phone"}}})+a.getTableRow({tr:{className:""},td:{className:"spec",label:"Telephone 2 : ",input:{type:"text",name:"phone2",id:"phone2",p_holder:"Phone"}}})+a.getTableRow({tr:{className:""},td:{className:"spec",label:"Email : ",input:{type:"text",name:"email",id:"email",p_holder:"email"}}})+"</table>"+a.getSubmitButton("Add")+'<div class="contact-errors"></div><input type="hidden" name="tankid" value="'+b+'"><input type="hidden" name="userid" value="'+c+'"></form></div></div></div>';a.appendOverlayToWrapper(d),a.attachOverlayClose(),a.attachFormSubmit()},AddContact.prototype.getOverlayHeader=function(a){return'<span class="'+a.className+'">X</span><h2>Contacts - Add</h2>'},AddContact.prototype.getTableRow=function(a){return'<tr class="'+a.tr.className+'"><td class="'+a.td.className+'">'+a.td.label+'</td><td><input type="'+a.td.input.type+'" name="'+a.td.input.name+'" id="'+a.td.input.id+'" placeholder="'+a.td.input.p_holder+'" required></td></tr>'},AddContact.prototype.attachFormSubmit=function(){$("#s-c-form").on("click",function(a){var b=$.trim($("#title").val()),c=$.trim($("#name").val()),d=$.trim($("#job-title").val()),e=$.trim($("#company").val()),f=$.trim($("#phone1").val()),g=($.trim($("#phone2").val()),$.trim($("#email").val()));b.length&&c.length&&d.length&&e.length&&f.length&&g.length?$(".contact-form > form").submit():(console.log("All Fields Required"),console.log(b.length,c.length,d.length,e.length,f.length,g.length),$(".contact-errors").text("All fields required."))})},AddContact.prototype.attachOverlayClose=function(){$(".overlays > .addcontactform > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})})},AddContact.prototype.getSubmitButton=function(a){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="s-c-form" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 80.8 27.7" enable-background="new 0 0 80.8 27.7" xml:space="preserve"><g><rect x="0.5" y="0.4" fill="#839D3C" stroke="#F3F8F9" stroke-miterlimit="10" width="80.3" height="27.2"/><g><rect x="28.6" y="9.8" fill="none" width="68.2" height="29.8"/><text transform="matrix(1 0 0 1 28.5552 17.8945)" fill="#FFFFFF" font-size="12.1205">'+a+'</text></g><polygon fill="#FFFFFF" points="19.7,14.3 15.4,16.7 11,19.1 11,14.3 11,9.5 15.4,11.9 	"/></g></svg>'};var EditContact=function(){this.uncheckAllExceptTarget=function(a){$(".contact-checkbox").not(a).prop("checked",!1)},this.handleContactBoxTrigger=function(a){var b=a.data.context,c=$(this).attr("data-id");b.uncheckAllExceptTarget(this),b.getCheckCount()?b.allowActionButtons(b,this,c):b.restrictAllowButtons(b,this,c)},this.allowActionButtons=function(a,b,c){a.setAllowCursor(),a.setDataAttributes(c),a.bindActions(a)},this.restrictAllowButtons=function(a,b,c){a.setRestrictCursor(),a.removeDataAttributes(),a.unBindActions(a)},this.bindActions=function(a){$("#edit-contact").on("click",{context:a},a.editTankContact),$("#remove-contact").on("click",{context:a},a.removeTankContact)},this.unBindActions=function(a){$("#edit-contact").unbind("click",a.editTankContact),$("#remove-contact").unbind("click",a.removeTankContact)},this.appendOverlayToWrapper=function(a){$(a).hide().appendTo(".wrapper").fadeIn("fast")},this.setAllowCursor=function(){$("#edit-contact, #remove-contact").css({cursor:"pointer"})},this.setRestrictCursor=function(){$("#edit-contact, #remove-contact").css({cursor:"not-allowed"})},this.setDataAttributes=function(a){$("#edit-contact").attr("data-id",a),$("#remove-contact").attr("data-id",a)},this.removeDataAttributes=function(){$("#edit-contact").attr("data-id",""),$("#remove-contact").attr("data-id","")},this.getCheckCount=function(){return $(".contact-checkbox:checked").length},this.attachCheckBoxesEventHandlers=function(){$(".contact-checkbox").on("click",{context:this},this.handleContactBoxTrigger)},this.getTankId=function(){return $("meta[name=tankid]").attr("content")},this.getUserId=function(){return $("meta[name=userid]").attr("content")},this.init=function(){this.attachCheckBoxesEventHandlers()}};$(function(){edit_contact=new EditContact,edit_contact.init()}()),EditContact.prototype.editTankContact=function(a){var b=a.data.context,c=b.getTankId(),d=b.getUserId(),e=$(this).attr("data-id"),f='<div class="overlays"><div class="addcontactform">'+b.getOverlayHeader({className:"close"})+'<div class="contact-form"><form method="post" action="/contacts/update"><table>'+b.getTableRow({tr:{className:"theader"},td:{className:"spec",label:"Title Header   :",input:{type:"text",name:"title",id:"title",p_holder:"Contact title"}}})+b.getTableRow({tr:{className:""},td:{className:"spec",label:"Name :",input:{type:"text",name:"name",id:"name",p_holder:"Full name"}}})+b.getTableRow({tr:{className:""},td:{className:"spec",label:"Job title : ",input:{type:"text",name:"job-title",id:"job-title",p_holder:"job title"}}})+b.getTableRow({tr:{className:""},td:{className:"spec",label:"Company : ",input:{type:"text",name:"company",id:"company",p_holder:"Company name"}}})+b.getTableRow({tr:{className:""},td:{className:"spec",label:"Telephone 1 :",input:{type:"phone1",name:"phone1",id:"phone1",p_holder:"Phone"}}})+b.getTableRow({tr:{className:""},td:{className:"spec",label:"Telephone 2 : ",input:{type:"text",name:"phone2",id:"phone2",p_holder:"Phone"}}})+b.getTableRow({tr:{className:""},td:{className:"spec",label:"Email : ",input:{type:"text",name:"email",id:"email",p_holder:"email"}}})+"</table>"+b.getSubmitButton("Update")+'<div class="contact-errors"></div><input type="hidden" name="tankid" value="'+c+'"><input type="hidden" name="userid" value="'+d+'"><input type="hidden" name="id" value="'+e+'"></form></div></div></div>';b.appendOverlayToWrapper(f),b.attachOverlayClose(b),b.attachFormSubmit(),b.getFormFields(b,e)},EditContact.prototype.getFormFields=function(a,b){$.ajax({type:"POST",url:"/contacts/details",data:{id:b},success:function(b){a.setFormFields(b)}})},EditContact.prototype.setFormFields=function(a){$("#title").val(a.title),$("#name").val(a.name),$("#job-title").val(a.job_title),$("#company").val(a.company),$("#phone1").val(a.telephone_1),$("#phone2").val(a.telephone_2),$("#email").val(a.email),$("#email").val(a.email)},EditContact.prototype.getOverlayHeader=function(a){return'<span class="'+a.className+'">X</span><h2>Contacts - Add</h2>'},EditContact.prototype.getTableRow=function(a){return'<tr class="'+a.tr.className+'"><td class="'+a.td.className+'">'+a.td.label+'</td><td><input type="'+a.td.input.type+'" name="'+a.td.input.name+'" id="'+a.td.input.id+'" placeholder="'+a.td.input.p_holder+'" required></td></tr>'},EditContact.prototype.attachFormSubmit=function(){$("#s-c-form").on("click",function(a){var b=$.trim($("#title").val()),c=$.trim($("#name").val()),d=$.trim($("#job-title").val()),e=$.trim($("#company").val()),f=$.trim($("#phone1").val()),g=($.trim($("#phone2").val()),$.trim($("#email").val()));b.length&&c.length&&d.length&&e.length&&f.length&&g.length?$(".contact-form > form").submit():(console.log("All Fields Required"),console.log(b.length,c.length,d.length,e.length,f.length,g.length),$(".contact-errors").text("All fields required."))})},EditContact.prototype.attachOverlayClose=function(a){$(".overlays > .addcontactform > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})}),a.unBindActions(a),a.setRestrictCursor(),a.uncheckAllExceptTarget("")},EditContact.prototype.getSubmitButton=function(a){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="s-c-form" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 80.8 27.7" enable-background="new 0 0 80.8 27.7" xml:space="preserve"><g><rect x="0.5" y="0.4" fill="#839D3C" stroke="#F3F8F9" stroke-miterlimit="10" width="80.3" height="27.2"/><g><rect x="28.6" y="9.8" fill="none" width="68.2" height="29.8"/><text transform="matrix(1 0 0 1 28.5552 17.8945)" fill="#FFFFFF" font-size="12.1205">'+a+'</text></g><polygon fill="#FFFFFF" points="19.7,14.3 15.4,16.7 11,19.1 11,14.3 11,9.5 15.4,11.9  "/></g></svg>'},EditContact.prototype.removeTankContact=function(a){var b=a.data.context,c=$(this).attr("data-id"),d='<div class="overlays"><div class="confirm-remove"><span class="close">X</span><h2>Contacts - Remove</h2><div class="dialogue"><div class="left"><p>Are you sure you want to remove contact from this list</p></div><div class="right">'+b.getDeleteButton("Update",c)+"</div><div></div></div>";b.appendOverlayToWrapper(d),b.attachRemoveOverlayClose(b),b.submitRemoveRequest()},EditContact.prototype.attachRemoveOverlayClose=function(a){$(".overlays > .confirm-remove > .close").on("click",function(a){$(".overlays").fadeOut("fast",function(a){$(this).remove()})}),a.unBindActions(a),a.setRestrictCursor(),a.uncheckAllExceptTarget("")},EditContact.prototype.submitRemoveRequest=function(){$("#d-c-form").on("click",function(){var a=$(this),b=$(a).attr("data-id");$.ajax({type:"POST",url:"/contacts/delete",data:{id:b},success:function(a){a.status&&location.reload(!0)}})})},EditContact.prototype.getDeleteButton=function(a,b){return'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="d-c-form" data-id="'+b+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 80.8 27.7" enable-background="new 0 0 80.8 27.7" xml:space="preserve"><g><rect x="0.5" y="0.4" fill="#839D3C" stroke="#F3F8F9" stroke-miterlimit="10" width="80.3" height="27.2"/><g><rect x="28.6" y="9.8" fill="none" width="68.2" height="29.8"/><text transform="matrix(1 0 0 1 28.5552 17.8945)" fill="#FFFFFF" font-size="12.1205">'+a+'</text></g><polygon fill="#FFFFFF" points="19.7,14.3 15.4,16.7 11,19.1 11,14.3 11,9.5 15.4,11.9  "/></g></svg>'},$("#datefrom").datepicker({dateFormat:"yy-mm-dd"}),$("#dateto").datepicker({dateFormat:"yy-mm-dd"}),$(".edit-tank-inspection").on("click",function(){var a=$(this),b=$(a).attr("data-tankid"),c=$("meta[name=userid]").attr("content"),d='<div class="overlays"><div class="editinspection"><span class="close">X</span><h2>Tank Inspection - Edit</h2><div class="inspection-form"><form method="post" action="/inspection/edit"><table class="upper"><tr><td class="spec">Contractor : </td><td><input type="text" name="contractor" id="contractor" placeholder="Contractor name" required></td></tr><tr><td class="spec">Telephone : </td><td><input type="text" name="telephone" id="telephone" placeholder="Telephone number" required></td></tr><tr><td class="spec">Email : </td><td><input type="email" name="email" id="email" placeholder="email" required></td></tr></table><div class="bottom"><table><tr><td class="spec">Date Inspected : </td><td><input type="text" name="d-inspected" id="date-inspected" placeholder="Date Inspected" required></p></td></tr><tr><td class="spec">Date Cleaned : </td><td><input type="text" name="d-cleaned" id="date-cleaned" placeholder="Date Cleaned" required></p></td></tr><tr class="last"><td class="spec">Next Inspection Due : </td><td><input type="text" name="d-next-inspection" id="next-inspection" placeholder="Next Inspection Date" required></p></td></tr></table></div>'+getInspectionEditButton("#1376A1","Update")+'<div class="reporting-errors"></div><input type="hidden" name="tankid" value="'+b+'"><input type="hidden" name="userid" value="'+c+'"></form></div></div></div>';$(d).hide().appendTo(".wrapper").fadeIn("fast"),addInspectEditOverlayCloseEvent(),date_time_inspection_datepickers(),attactInspectionEditSubmit(),fillInspectionDetailFields(b)}),$(".edit-tank-location").on("click",function(){var a=$(this),b=$(a).attr("data-tankid"),c=$("meta[name=userid]").attr("content"),d='<div class="overlays"><div class="editlocation"><span class="close">X</span><h2>Location - Edit</h2><div class="location-form"><form method="post" action="/location/edit"><table><tr><td class="spec">Name : </td><td><input type="text" name="name" id="name" placeholder="Name or Airport or Place" required></td></tr><tr><td class="spec">Airport code : </td><td><input type="text" name="airportcode" id="airportcode" placeholder="IATA Code, If Applicable" required></td></tr><tr><td class="spec">Address :</td><td><input type="text" name="street1" id="street1" placeholder="Street 1" required></td></tr><tr><td class="spec"></td><td><input type="text" name="street2" id="street2" placeholder="Street 2" required></td></tr><tr><td class="spec"></td><td><input type="text" name="city" id="city" placeholder="City" required></td></tr><tr><td class="spec"></td><td><input type="text" name="region" id="region" placeholder="Region" required><input type="text" name="postcode" id="postcode" placeholder="Post code" required></td></tr><tr><td class="spec"></td><td><input type="text" name="country" id="country" placeholder="Country" required></td></tr></table>'+getInspectionEditButton("#788838","Update")+'<div class="reporting-errors"></div><input type="hidden" name="tankid" value="'+b+'"><input type="hidden" name="userid" value="'+c+'"></form></div></div></div>';$(d).hide().appendTo(".wrapper").fadeIn("fast"),addLocationEditOverlayCloseEvent(),fillLocationFormFields(b),attactLocationEditSubmit()}),$(".edit-tank-specs").on("click",function(){var a=$(this),b=$(a).attr("data-tankid"),c=$("meta[name=userid]").attr("content"),d='<div class="overlays"><div class="editspecs"><span class="close">X</span><h2>Tank Inspection - Edit</h2><div class="specifications-form"><form method="post" action="/specifications/edit"><table><tr><td class="spec">Grade of fuel : </td><td><select name="fuelgrade" id="fuelgrade" required><option value="JET-A1">JET-A1</option><option value="JET-A1 + AL48">JET-A1 + AL48</option><option value="Avgas 100LL">Avgas 100LL</option><option value="Avgas UL91">Avgas UL91</option></select></td></tr><tr><td class="spec">Markings ID : </td><td><input type="text" name="markingid" id="markingid" placeholder="Marking ID" required></td></tr><tr><td class="spec">Shape : </td><td><select name="tankshape" id="tankshape" required><option value="Rectangle">Rectangle</option><option value="Circle">Circle</option><option value="Square">Square</option><option value="Oval">Oval</option></select></td></tr><tr><td class="spec">Titled : </td><td><select name="titled" id="titled" required><option value="Yes">Yes</option><option value="No">No</option></select></td></tr><tr><td class="spec">Internal : </td><td><select name="internal" id="internal" required><option value="Yes">Yes</option><option value="No">No</option></select></td></tr></table>'+getInspectionEditButton("#788838","Update")+'<div class="reporting-errors"></div><input type="hidden" name="tankid" value="'+b+'"><input type="hidden" name="userid" value="'+c+'"></form></div></div></div>';$(d).hide().appendTo(".wrapper").fadeIn("fast"),addSpecsEditOverlayCloseEvent(),fillSpecsFormFields(b),attactSpecsEditSubmit()}),$(".global").length&&setTimeout(function(){$(".global").fadeOut("slow")},3e3),$(".global .close").on("click",function(){$(".global").fadeOut("slow")}),$("#add-reporting-email , #add-levelalert-email , #add-inspectdue-email").on("click",function(a){var b=$("meta[name=tankid]").attr("content"),c=$(this).attr("data-name"),d="",e=$("meta[name=userid]").attr("content");switch(console.log(c),c){case"reporting":color="#839D3C",d="Email Reporting - Add";break;case"levels":color="#839D3C",d="Level alert - Add";break;case"inspection":color="#1376A1",d="Tank Inspection - Add"}var f='<div class="overlays"><div class="form '+c+'"><span class="close">X</span><h2>'+d+'</h2><div class="report-form"><form method="post" action="/notifications/add/email"><table class="upper"><tr><td class="spec">Email : </td><td><input type="email" name="email" id="email" placeholder="email" required></td></tr><tr><td class="spec">Status : </td><td><select name="status" id="status" required><option value="1">Active</option><option value="0">Disabled</option></select></td></tr><tr><td class="spec">Frequency : </td><td><select name="frequency" id="frequency" required><option value="daily">Daily report</option><option value="weekly">Weekly report</option><option value="monthly">Monthly report</option></select></td></tr></table><div class="bottom '+c+'"><p>Set start time and date to receive your reporting data </p><table><tr><td class="spec">Time : </td><td><input type="text" name="time" id="timepicker" placeholder="Pick Time" required></p></td></tr><tr><td class="spec">Start Date : </td><td><input type="text" name="date" id="datepicker" placeholder="Pick Date" required></p></td></tr></table></div><div class="reporting-errors"></div>'+getNotificationEmailFormButton(color,"Add")+'<input type="hidden" name="tankid" value="'+b+'"><input type="hidden" name="type" value="'+c+'"><input type="hidden" name="userid" value="'+e+'"></form></div></div></div>';$(f).hide().appendTo(".wrapper").fadeIn("fast"),addOverlayCloseEvent(),attachInputFieldTimeDateSelectors(),attactAddSubmitEvent(c)}),$(".edit-notifications").on("click",function(){
var a=$(this),b=$(a).attr("data-id"),c=$(this).attr("data-name"),d=$("meta[name=tankid]").attr("content"),e="",f=$("meta[name=userid]").attr("content");switch(c){case"reporting":color="#839D3C",e="Email Reporting - Edit";break;case"levels":color="#839D3C",e="Level alert - Edit";break;case"inspection":color="#1376A1",e="Tank Inspection - Edit"}var g='<div class="overlays"><div class="form '+c+'"><span class="close">X</span><h2>'+e+'</h2><div class="report-form"><form method="post" action="/notifications/update/email"><table class="upper"><tr><td class="spec">Email : </td><td><input type="email" name="email" data-oldmail="" id="email" placeholder="email" required></td></tr><tr><td class="spec">Status : </td><td><select name="status" id="status" required><option value="1">Active</option><option value="0">Disabled</option></select></td></tr><tr><td class="spec">Frequency : </td><td><select name="frequency" id="frequency" required><option value="daily">Daily report</option><option value="weekly">Weekly report</option><option value="monthly">Monthly report</option></select></td></tr></table><div class="bottom '+c+'"><p>Set start time and date to receive your reporting data </p><table><tr><td class="spec">Time : </td><td><input type="text" name="time" id="timepicker" placeholder="Pick Time" required></p></td></tr><tr><td class="spec">Start Date : </td><td><input type="text" name="date" id="datepicker" placeholder="Pick Date" required></p></td></tr></table></div><div class="reporting-errors"></div>'+getNotificationEmailFormButton(color,"Update")+'<input type="hidden" name="id" value="'+b+'"><input type="hidden" name="tankid" value="'+d+'"><input type="hidden" name="type" value="'+c+'"><input type="hidden" name="userid" value="'+f+'"></form></div></div></div>';$(g).hide().appendTo(".wrapper").fadeIn("fast"),addOverlayCloseEvent(),getNotificationDetails(b),attachInputFieldTimeDateSelectors(),attactUpdateSubmitEvent(c)}),$(".remove-notifications").on("click",function(){var a=$(this),b=$(a).attr("data-id");$.ajax({type:"POST",url:"/notifications/delete/email",data:{id:b},success:function(b){b.status&&$(a).parents("li").slideUp("slow")}})});var $report_upload=$(".client-details > .content > .content-blocks > .bottom > .right");$($report_upload).children(".report-upload").on("click",function(){$target=$(this),$($target).parents(".right").css({top:0,right:0,bottom:0,left:0,margin:"auto",position:"absolute","-webkit-box-shadow":"0px 0px 20px 0px rgba(0,0,0,0.75)","-moz-box-shadow":"0px 0px 20px 0px rgba(0,0,0,0.75)","box-shadow":"0px 0px 20px 0px rgba(0,0,0,0.75)"}).animate({height:"400px",width:"600px"},"slow"),$($target).parents(".right").children(".files").animate({height:"260px"}),$($target).parents(".right").children(".files").children(".file").children(".remove").show(),$($target).hide(),$($target).parents(".right").children(".close").show(),$($target).parents(".right").children(".upload").show()}),$($report_upload).children(".close").on("click",function(a){$target=$(this),$($target).parents(".right").animate({height:"100%",width:"35%"}).hide("fast").css({position:"relative",display:"none","-webkit-box-shadow":"none","-moz-box-shadow":"none","box-shadow":"none"}).fadeIn("fast"),$($target).parents(".right").children(".files").animate({height:"145px"}),$($target).parents(".right").children(".files").children(".file").children(".remove").hide(),$($target).hide(),$($target).parents(".right").children(".report-upload").show(),$($target).parents(".right").children(".upload").hide()}),$("#file-upload").change(function(){var a=this.value,b=a.match(/([^\/\\]+)$/),c=b[1];$("#filename").html(c),$(".history-form").submit()}),$($report_upload).find(".files > .file > .remove > .delete").on("click",function(){var a=$(this),b=$(a).attr("data-id");$.ajax({type:"POST",url:"/delete/history",data:{id:b},success:function(b){b.status&&$(a).parents(".file").slideUp("slow")}})});var toggleSearch=function(){this.hasClass=function(a){return $(".toggel-user-search").hasClass(a)},this.addClass=function(a){$(".toggel-user-search").addClass(a)},this.removeClass=function(a){$(".toggel-user-search").removeClass(a)},this.showSearchOptions=function(){$(".search-options").slideDown()},this.hideSearchOptions=function(){$(".search-options").slideUp()},this.handleSearchToggle=function(a){var b=a.data.context;b.hasClass("glyphicon-option-horizontal")?(b.removeClass("glyphicon-option-horizontal"),b.addClass("glyphicon-option-vertical"),b.showSearchOptions()):b.hasClass("glyphicon-option-vertical")&&(b.removeClass("glyphicon-option-vertical"),b.addClass("glyphicon-option-horizontal"),b.hideSearchOptions())},this.attachToggleEvent=function(){$(".toggel-user-search").on("click",{context:this},this.handleSearchToggle)},this.init=function(){this.attachToggleEvent()}};$(function(){var a=new toggleSearch;a.init()}());